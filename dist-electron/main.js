"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("electron"),n=require("node:path");process.env.APP_ROOT=n.join(__dirname,"..");const i=n.join(process.env.APP_ROOT,"dist-electron"),t=n.join(process.env.APP_ROOT,".output/public");process.env.VITE_PUBLIC=process.env.VITE_DEV_SERVER_URL?n.join(process.env.APP_ROOT,"public"):t;let o;function s(){o=new e.BrowserWindow({width:1200,height:800,minWidth:480,minHeight:320,webPreferences:{preload:n.join(i,"preload.js")}}),process.env.VITE_DEV_SERVER_URL?(o.loadURL(process.env.VITE_DEV_SERVER_URL??""),o.webContents.openDevTools()):o.loadFile(n.join(process.env.VITE_PUBLIC,"index.html"))}function p(){e.ipcMain.handle("app-start-time",()=>new Date().toLocaleString())}function a(){e.ipcMain.handle("open-file-dialog",async()=>{const{canceled:r,filePaths:l}=await e.dialog.showOpenDialog({filters:[{name:"ePub",extensions:["epub"]}],properties:["openFile","multiSelections"]});if(!r)return l})}e.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(e.app.quit(),o=null)});e.app.on("activate",()=>{e.BrowserWindow.getAllWindows().length===0&&s()});e.app.whenReady().then(()=>{p(),a(),s()});exports.MAIN_DIST=i;exports.RENDERER_DIST=t;
